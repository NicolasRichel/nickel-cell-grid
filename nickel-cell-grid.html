<link rel="import" href="../polymer/polymer-element.html" />
<link rel="import" href="../polymer/lib/elements/dom-repeat.html" />
<link rel="import" href="../nickel-color-cell/nickel-color-cell.html" />

<dom-module id="nickel-cell-grid">
  <template>
    <custom-style>
      <style is="custom-style">
        :host {
          display: block;
        }

        .cell {
          margin: 0;
          padding: 0;
          display: inline-block;
        }

        .line {
          margin: 0;
          padding: 0;
        }
      </style>
    </custom-style>
    <div class="container">
      <template is="dom-repeat" items="[[_grid]]">
        <div class="line">
          <template is="dom-repeat" items="[[item.line]]">
            <div class="cell"><nickel-color-cell num="[[item.num]]" show-num></nickel-color-cell></div>
          </template>
        </div>
      </template>
    </div>
  </template>
  <script>
    'use strict';
    /**
     * `nickel-cell-grid`
     * A basic grid of color cells.
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class NickelCellGrid extends Polymer.Element {

      static get is() { return 'nickel-cell-grid'; }

      static get properties() {
        return {
          /** Number of cells on the horizontal axis. */
          nx: {
            type: Number,
            value: 3
          },

          /** Number of cells on the vertical axis. */
          ny: {
            type: Number,
            value: 3
          },

          /** The grid array. */
          _grid: {
            type: Array,
            computed: '_getGridArray(nx, ny)'
          }
        };
      }

      /**
       * Creates and return a "Matrix" (an array of array) with `nx` columns and
       * `ny` lines. Each element of this matrix is an object with a `num` field.
       * The returned array is a representation of the grid.
       *
       * @param {Number} nx
       * @param {Number} ny
       * @return {Array<Array<Object>>} the array that represent the grid
       */
      _getGridArray(nx, ny) {
        let gridArray = [];
        let lineArray;
        let n = 0;
        for (let i=0 ; i<ny ; i++) {
          lineArray = [];
          for (let j=0 ; j<nx ; j++) {
            lineArray.push({ "num": n });
            n++;
          }
          gridArray.push({ "line": lineArray });
        }
        return gridArray;
      }
    }
    window.customElements.define(NickelCellGrid.is, NickelCellGrid);
  </script>
</dom-module>
